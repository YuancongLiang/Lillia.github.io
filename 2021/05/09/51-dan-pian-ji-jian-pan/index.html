<!DOCTYPE HTML><html lang="zh-CN"><head><meta charset="utf-8"><meta name="keywords" content="51单片机键盘, 莉莉娅！"><meta name="description" content="（其实是知乎内容的搬运）
知乎链接低端键盘diy，从入门到放弃 - 知乎 (zhihu.com)

前段时间捣鼓按键的时候突发奇想，想做一块小键盘放在左手边的104布局，方便实验输数据，左手键盘敲数据，右手鼠标，从这学期开学开始谋划，做到现"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no"><meta name="renderer" content="webkit|ie-stand|ie-comp"><meta name="mobile-web-app-capable" content="yes"><meta name="format-detection" content="telephone=no"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"><meta name="referrer" content="no-referrer-when-downgrade"><title>51单片机键盘 | 莉莉娅！</title><link rel="icon" type="image/png" href="/Lillia.github.io/favicon.png"><link rel="stylesheet" href="/Lillia.github.io/libs/awesome/css/all.min.css"><link rel="stylesheet" href="/Lillia.github.io/libs/materialize/materialize.min.css"><link rel="stylesheet" href="/Lillia.github.io/libs/aos/aos.css"><link rel="stylesheet" href="/Lillia.github.io/libs/animate/animate.min.css"><link rel="stylesheet" href="/Lillia.github.io/libs/lightGallery/css/lightgallery.min.css"><link rel="stylesheet" href="/Lillia.github.io/css/matery.css"><link rel="stylesheet" href="/Lillia.github.io/css/my.css"><link rel="stylesheet" href="/Lillia.github.io/css/dark.css" media="none" onload='"all"!=media&&(media="all")'><link rel="stylesheet" href="/Lillia.github.io/libs/tocbot/tocbot.css"><link rel="stylesheet" href="/Lillia.github.io/css/post.css"><link rel="stylesheet" href="/Lillia.github.io/css/reward.css"><script src="/Lillia.github.io/libs/jquery/jquery-3.6.0.min.js"></script><meta name="generator" content="Hexo 6.3.0"><style>.github-emoji{position:relative;display:inline-block;width:1.2em;min-height:1.2em;overflow:hidden;vertical-align:top;color:transparent}.github-emoji>span{position:relative;z-index:10}.github-emoji .fancybox,.github-emoji img{margin:0!important;padding:0!important;border:none!important;outline:0!important;text-decoration:none!important;user-select:none!important;cursor:auto!important}.github-emoji img{height:1.2em!important;width:1.2em!important;position:absolute!important;left:50%!important;top:50%!important;transform:translate(-50%,-50%)!important;user-select:none!important;cursor:auto!important}.github-emoji-fallback{color:inherit}.github-emoji-fallback img{opacity:0!important}</style><link rel="alternate" href="/Lillia.github.io/atom.xml" title="莉莉娅！" type="application/atom+xml"></head><body><header class="navbar-fixed"><nav id="headNav" class="bg-color nav-transparent"><div id="navContainer" class="nav-wrapper container"><div class="brand-logo"><a href="/Lillia.github.io/" class="waves-effect waves-light"><img src="/Lillia.github.io/medias/logo.png" class="logo-img" alt="LOGO"> <span class="logo-span">莉莉娅！</span></a></div><a href="#" data-target="mobile-nav" class="sidenav-trigger button-collapse"><i class="fas fa-bars"></i></a><ul class="right nav-menu"><li class="hide-on-med-and-down nav-item"><a href="/Lillia.github.io/" class="waves-effect waves-light"><i class="fas fa-home" style="zoom:.6"></i> <span>首页</span></a></li><li class="hide-on-med-and-down nav-item"><a href="/Lillia.github.io/tags" class="waves-effect waves-light"><i class="fas fa-tags" style="zoom:.6"></i> <span>标签</span></a></li><li class="hide-on-med-and-down nav-item"><a href="/Lillia.github.io/categories" class="waves-effect waves-light"><i class="fas fa-bookmark" style="zoom:.6"></i> <span>分类</span></a></li><li class="hide-on-med-and-down nav-item"><a href="/Lillia.github.io/archives" class="waves-effect waves-light"><i class="fas fa-archive" style="zoom:.6"></i> <span>归档</span></a></li><li class="hide-on-med-and-down nav-item"><a href="/Lillia.github.io/about" class="waves-effect waves-light"><i class="fas fa-user-circle" style="zoom:.6"></i> <span>关于</span></a></li><li class="hide-on-med-and-down nav-item"><a href="/Lillia.github.io/contact" class="waves-effect waves-light"><i class="fas fa-comments" style="zoom:.6"></i> <span>留言板</span></a></li><li class="hide-on-med-and-down nav-item"><a href="/Lillia.github.io/friends" class="waves-effect waves-light"><i class="fas fa-address-book" style="zoom:.6"></i> <span>友情链接</span></a></li><li><a href="#searchModal" class="modal-trigger waves-effect waves-light"><i id="searchIcon" class="fas fa-search" title="搜索" style="zoom:.85"></i></a></li><li><a href="javascript:;" class="waves-effect waves-light" onclick="switchNightMode()" title="深色/浅色模式"><i id="sum-moon-icon" class="fas fa-sun" style="zoom:.85"></i></a></li></ul><div id="mobile-nav" class="side-nav sidenav"><div class="mobile-head bg-color"><img src="/Lillia.github.io/medias/logo.png" class="logo-img circle responsive-img"><div class="logo-name">莉莉娅！</div><div class="logo-desc">Never really desperate, only the lost of the soul.</div></div><ul class="menu-list mobile-menu-list"><li class="m-nav-item"><a href="/Lillia.github.io/" class="waves-effect waves-light"><i class="fa-fw fas fa-home"></i> 首页</a></li><li class="m-nav-item"><a href="/Lillia.github.io/tags" class="waves-effect waves-light"><i class="fa-fw fas fa-tags"></i> 标签</a></li><li class="m-nav-item"><a href="/Lillia.github.io/categories" class="waves-effect waves-light"><i class="fa-fw fas fa-bookmark"></i> 分类</a></li><li class="m-nav-item"><a href="/Lillia.github.io/archives" class="waves-effect waves-light"><i class="fa-fw fas fa-archive"></i> 归档</a></li><li class="m-nav-item"><a href="/Lillia.github.io/about" class="waves-effect waves-light"><i class="fa-fw fas fa-user-circle"></i> 关于</a></li><li class="m-nav-item"><a href="/Lillia.github.io/contact" class="waves-effect waves-light"><i class="fa-fw fas fa-comments"></i> 留言板</a></li><li class="m-nav-item"><a href="/Lillia.github.io/friends" class="waves-effect waves-light"><i class="fa-fw fas fa-address-book"></i> 友情链接</a></li><li><div class="divider"></div></li><li><a href="https://github.com/YuancongLiang" class="waves-effect waves-light" target="_blank"><i class="fab fa-github-square fa-fw"></i> Fork Me</a></li></ul></div></div><style>.nav-transparent .github-corner{display:none!important}.github-corner{position:absolute;z-index:10;top:0;right:0;border:0;transform:scale(1.1)}.github-corner svg{color:#0f9d58;fill:#fff;height:64px;width:64px}.github-corner:hover .octo-arm{animation:a .56s ease-in-out}.github-corner .octo-arm{animation:none}@keyframes a{0%,to{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}</style><a href="https://github.com/YuancongLiang" class="github-corner tooltipped hide-on-med-and-down" target="_blank" data-tooltip="Fork Me" data-position="left" data-delay="50"><svg viewBox="0 0 250 250" aria-hidden="true"><path d="M0 0 115 115 130 115 142 142 250 250 250 0Z"></path><path d="M128.3 109C113.8 99.7 119 89.6 119 89.6 122 82.7 120.5 78.6 120.5 78.6 119.2 72 123.4 76.3 123.4 76.3 127.3 80.9 125.5 87.3 125.5 87.3 122.9 97.6 130.6 101.9 134.4 103.2" fill="currentColor" style="transform-origin:130px 106px" class="octo-arm"></path><path d="M115 115C114.9 115.1 118.7 116.5 119.8 115.4L133.7 101.6C136.9 99.2 139.9 98.4 142.2 98.6 133.8 88 127.5 74.4 143.8 58 148.5 53.4 154 51.2 159.7 51 160.3 49.4 163.2 43.6 171.4 40.1 171.4 40.1 176.1 42.5 178.8 56.2 183.1 58.6 187.2 61.8 190.9 65.4 194.5 69 197.7 73.2 200.1 77.6 213.8 80.2 216.3 84.9 216.3 84.9 212.7 93.1 206.9 96 205.4 96.6 205.1 102.4 203 107.8 198.3 112.5 181.9 128.9 168.3 122.5 157.7 114.1 157.9 116.9 156.7 120.9 152.7 124.9L141 136.5C139.8 137.7 141.6 141.9 141.8 141.8Z" fill="currentColor" class="octo-body"></path></svg></a></nav></header><div class="bg-cover pd-header post-cover" style="background-image:url(/Lillia.github.io/medias/featureimages/22.jpg)"><div class="container" style="right:0;left:0"><div class="row"><div class="col s12 m12 l12"><div class="brand"><h1 class="description center-align post-title">51单片机键盘</h1></div></div></div></div></div><main class="post-container content"><div class="row"><div id="main-content" class="col s12 m12 l9"><div id="artDetail"><div class="card"><div class="card-content article-info"><div class="row tag-cate"><div class="col s7"><div class="article-tag"><a href="/Lillia.github.io/tags/blog/"><span class="chip bg-color">blog</span></a> <a href="/Lillia.github.io/tags/%E5%8D%95%E7%89%87%E6%9C%BA/"><span class="chip bg-color">单片机</span></a> <a href="/Lillia.github.io/tags/%E9%94%AE%E7%9B%98/"><span class="chip bg-color">键盘</span></a></div></div><div class="col s5 right-align"><div class="post-cate"><i class="fas fa-bookmark fa-fw icon-category"></i> <a href="/Lillia.github.io/categories/%E5%8D%95%E7%89%87%E6%9C%BA/" class="post-category">单片机</a></div></div></div><div class="post-info"><div class="post-date info-break-policy"><i class="far fa-calendar-minus fa-fw"></i> 发布日期:&nbsp;&nbsp; 2021-05-09</div><div class="info-break-policy"><i class="far fa-file-word fa-fw"></i> 文章字数:&nbsp;&nbsp; 3.1k</div></div></div><hr class="clearfix"><link rel="stylesheet" href="/Lillia.github.io/libs/prism/prism.min.css"><div class="card-content article-card-content"><div id="articleContent"><p>（其实是知乎内容的搬运）</p><h2 id="知乎链接"><a href="#知乎链接" class="headerlink" title="知乎链接"></a>知乎链接</h2><p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/370688866">低端键盘diy，从入门到放弃 - 知乎 (zhihu.com)</a></p><img src="/Lillia.github.io/2021/05/09/51-dan-pian-ji-jian-pan/v2-aa8da7ea78afd039415ca85d6d3043b4_720w.jpeg" title="莉莉娅！"><p>前段时间捣鼓按键的时候突发奇想，想做一块小键盘放在左手边的104布局，方便实验输数据，左手键盘敲数据，右手鼠标，从这学期开学开始谋划，做到现在基本能看了。</p><p>这块键盘在开始谋划的时候参考了很多刘威老师的博客，顺便指路一下：</p><p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/112810009">diy从pcb到焊接，到程序调试，真正意思上的diy机械键盘pcb由ad绘制 - 知乎 (zhihu.com)</a></p><p>以及另外一个大神：</p><p><a target="_blank" rel="noopener" href="https://www.zhihu.com/question/265112599/answer/297843217">你有什么有单片机或开源硬件做的有意思的作品吗？ - 知乎 (zhihu.com)</a></p><h2 id="芯片选用"><a href="#芯片选用" class="headerlink" title="芯片选用"></a><strong>芯片选用</strong></h2><p>我承认这显得很奇怪，但是我确实采用了51芯片来做这件事，芯片没有办法直接配备hid协议，因此还要单独配一个usb芯片，这里选择的是ch9329，一款可以直接将串口信息转为hid信号的芯片。</p><p>CH9329 是一款串口转标准 USB HID 设备(键盘、鼠标、自定义 HID)芯片，根据不同的工作模式， 在电脑上可被识别为标准的 USB 键盘设备、USB 鼠标设备或自定义 HID 类设备。该芯片接收客户端发送过来的串口数据，并按照 HID 类设备规范，将数据先进行打包再通过 USB 口上传给计算机。通过提供的上位机软件，用户也可自行配置芯片工作模式、串口通信模式、串口通信波特率、多种超时时间、VID、PID，以及各种 USB 字符串描述符。</p><img src="/Lillia.github.io/2021/05/09/51-dan-pian-ji-jian-pan/image-20230108190253036.png" title="CH9328/CH9329芯片作用示意图"><h2 id="设备清单"><a href="#设备清单" class="headerlink" title="设备清单"></a><strong>设备清单</strong></h2><p>STC15W4K32S2</p><p>CH9329</p><p>TTC金粉轴</p><p>CD42锂电池芯片模块</p><p>蓝牙JDY-18（废弃）</p><p>WS2812反贴灯（废弃）</p><p>二极管1N4148</p><p>AMS1117-3.3V（废弃）</p><p>卫星轴</p><p>电容</p><p>碳纤维定位板</p><h2 id="布局设计（这一段可以参考刘威老师的博客）"><a href="#布局设计（这一段可以参考刘威老师的博客）" class="headerlink" title="布局设计（这一段可以参考刘威老师的博客）"></a><strong>布局设计（这一段可以参考刘威老师的博客）</strong></h2><p>键盘的布局可以去 <a href="http://link.zhihu.com/?target=http%3A//www.keyboard-layout-editor.com/">http://www.keyboard-layout-editor.com/</a> 进行设计</p><img src="/Lillia.github.io/2021/05/09/51-dan-pian-ji-jian-pan/image-20230108194020579.png" title="网站页面"><p>在preset处可以选用一些比较常见的布局，注意复制粘贴的操作，选中某个键以后会在这行后面加上你复制的键位，但如果你复制的键位不止一列，它会在最下方重开一行，如果不选中任何键的话会直接粘贴在最下方新开的一行</p><img src="/Lillia.github.io/2021/05/09/51-dan-pian-ji-jian-pan/image-20230108194052432.png" title="键盘布局设置"><p>properties处可以设定键位的名称和长宽</p><img src="/Lillia.github.io/2021/05/09/51-dan-pian-ji-jian-pan/image-20230108194215830.png" title="键盘布局Raw Data"><p>在rawdata处得到我们需要的数据，全选后复制，进入下一个网站<a target="_blank" rel="noopener" href="http://builder.swillkb.com/">Plate &amp; Case Builder - swillkb</a></p><img src="/Lillia.github.io/2021/05/09/51-dan-pian-ji-jian-pan/image-20230108194437555.png" title="Plate&amp;Case Builder界面"><p>在plate layout处粘贴上我们刚才复制的数据，switch type可以选择按键的类型，如果要对照着来画pcb的话，如果采用跟樱桃轴适配的一类轴体建议采用第三个（也就是我选中的这个），他跟键轴的封装是对应的，当然，在后续找厂家定制定位板的时候，前三个都是可以的。</p><p>stabilizer type指的是卫星轴/平衡杆的类型，具体可以点一下看看，比较通用的是cherry+costar{_s1:}。</p><p>edge pading指边缘补充，不打开的时候键轴离边缘距离比较短，如果需要打开的话可以适当的增大键轴离边缘距离。</p><p>plate corners 是圆角处理，根据需要选择。</p><p>custom polygons为自定义多边形，这个就得发挥你的想象力了。</p><p>kerf不知道是啥，大家可以试几个参数看看效果。</p><img src="/Lillia.github.io/2021/05/09/51-dan-pian-ji-jian-pan/image-20230108194517998.png" title="kerf为10的情况"><p>key unit size是键轴的大小，一般不用改，除非你的轴也是定制的，而且跟公模不一样。</p><p>line size 和line color 就不说了，意义不是特别大，也比较好理解。</p><p>这里有一个叫做case type的内容，如果选择none的话，就只生成定位板的dxf，如果选择sandwich的话则生成一套的dxf，包括表面层，底层，定位板，和边框。</p><img src="/Lillia.github.io/2021/05/09/51-dan-pian-ji-jian-pan/image-20230108195039325.png" title="关于键盘的固定可以参考这个图"><p>poker选项就有点类似直接把板子叠起来，放到一个小盒子里固定。</p><p>在pcb布线排元件的时候，我们需要把Switch Layer的dxf下载下来，打开ad，左上角file-&gt;import-&gt;dxf/dwg</p><img src="/Lillia.github.io/2021/05/09/51-dan-pian-ji-jian-pan/image-20230108195427130.png" title="注意需要把比例调成mm，默认是mil，其他参数不是特别重要"><p>到这里前期准备就已经结束了。</p><h2 id="程序设计"><a href="#程序设计" class="headerlink" title="程序设计"></a><strong>程序设计</strong></h2><p>键盘的客制化目前比较主流的还是用Arduino刷qmk固件，操作比较简单，具体的刷qmk操作可以参考下面这个链接：</p><p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/79114621">低端客制化，一份简单的键盘制作记录 - 知乎 (zhihu.com)</a></p><p>另外一类的就是用stm32来实现矩阵键盘和用stm-cube实现hid协议的配置，像文章开头的两篇文章。</p><p>（但是我只会用51啊）</p><p>所以虽然很麻烦，外设还需要搭配上usb芯片，但我还是只有这种实现手段了。</p><p>矩阵扫描有三种方法，行列反置，行/列扫描，状态机，我们采取的还是列扫描（行扫描和列扫描要根据你二极管的方向决定），具体实现的代码这里就先不摆出来了。</p><p>根据矩阵扫描的结果，得到一份符合ch9329通信协议的串口数据，发送给ch9329芯片，配置好ch9329和stc芯片的波特率，就能得到hid信号。</p><p>并不需要处理长按或者短触这种操作，只需要把键盘扫描的结果发送过去即可，可以新增一个数组保存上一次的键盘数据，新的一组键盘扫描数据如果跟上次的数据一样，可以不发送新的这份数据（但我这里并没写这一部分，并不是特别重要，哪怕数据重复发送，系统也是可以处理的）。举个例子，如果我什么都没按，那键盘扫描的结果会是八个0，这八个0的数据包通过ch9329不断地发送给电脑，电脑也能够理解你是一直什么都没按；如果你只按下了a，那键盘的扫描结果会是0 0 0x10 0 0 0 0 0，这一组数据包通过ch9329不断地发送给电脑，电脑也是能够理解你是一直按着a的，并不影响实际操作。当然我们采取的是ch9329的协议传输模式，需要有数据包的包头和求和验证。具体的协议要求可以看ch9329的文档：</p><p><a target="_blank" rel="noopener" href="https://max.book118.com/html/2019/0511/8130105015002023.shtm">CH9329芯片串口通信协议.PDF (book118.com)</a></p><p>这里需要讲一下这个求和验证码，键盘码协议里事实上只要把数据帧头的两个hex码当作0x01，求和就是它这里的结果了。</p><p>了解了这两个以后，剩下就是很简单的流程了：芯片扫描-&gt;得到键盘按键结果-&gt;加工成数据包串口发送给ch9329-&gt;ch9329发送usb-hid信号给电脑。只需要注意波特率就好了。</p><h2 id="蓝牙（弃用）"><a href="#蓝牙（弃用）" class="headerlink" title="蓝牙（弃用）"></a><strong>蓝牙（弃用）</strong></h2><p>蓝牙功能有两种方法实现，第一种是用具备hid协议的蓝牙模块，第二种则是再写一块蓝牙适配器，通过蓝牙传输串口数据，串口数据再通过ch9329进行hid协议信号发送。但这里由于我当时偷懒，锂电池芯片并没有画电路，而是直接把一块锂电池芯片模块焊接在pcb上（这里甚至画封装的时候画反了，又画了一块新的转接板），而这块锂电池芯片模块有一点不适合，如果这个模块进入休眠的时候，必须按一下模块自带的一个按钮才能使用锂电池的供电，并不是特别的方便，而且蓝牙放在了pcb板的边缘，为了后续方便做外壳，就把蓝牙模块给阉割了。蓝牙模块阉割以后，ams1117稳压芯片就没有什么意义了，因为已经没有第二个需要3.3v电压的器件了。</p><p>ch9329因为有协议传输模式，能够更好的避免因为数据丢包导致的各种操作问题，建议不要使用ch9328而去选用ch9329的协议传输模式，一般具备hid协议的蓝牙都是串口透传，方便但有时会出现些丢包导致的操作问题。</p><h2 id="ws2812b贴片灯（弃用）"><a href="#ws2812b贴片灯（弃用）" class="headerlink" title="ws2812b贴片灯（弃用）"></a><strong>ws2812b贴片灯（弃用）</strong></h2><p>这一部分弃用的主要原因是因为反贴的封装并没有画好。。。焊接起来并不方便，当初因为担心51系列芯片没办法同时处理串口数据发送和PWM控制，所以灯位留给了另一款块芯片控制。这一段程序参考的是论坛里的一份源码，链接如下：</p><p><a target="_blank" rel="noopener" href="http://www.51hei.com/bbs/dpj-180742-1.html">基于51单片机的WS2812B全彩灯程序，亲测可用 - 单片机DIY制作 (51hei.com)</a></p><h2 id="全键无冲"><a href="#全键无冲" class="headerlink" title="全键无冲"></a><strong>全键无冲</strong></h2><p>标准的键盘hid协议一次只能传输6个普通键位，所以一般键盘都是6键无冲，但如果你会配置自定义hid协议，也是可以实现全键无冲的（二极管防鬼键只是在物理层面上实现了这种可能，实现全键无冲还是需要协议支持的），但自定义hid协议有可能导致在一些比较古老的主板上兼容性不好。hid协议的自定义可以参考一本教程叫《圈圈教你玩USB》。这里图方便我并不去配置这个内容了，当然，如果采用stm32的话可以直接用stm-cube搭建hid协议。</p><h2 id="原理图和PCB"><a href="#原理图和PCB" class="headerlink" title="原理图和PCB"></a><strong>原理图和PCB</strong></h2><p>这里看一下就可以了，事实上这个pcb的布局非常糟糕，当时做键盘的时候啥也不会，以为元件放正面会影响手感，把元件全放在了背面，导致整个pcb非常臃肿，连钉位都没加。</p><img src="/Lillia.github.io/2021/05/09/51-dan-pian-ji-jian-pan/image-20230108200205946.png"> <img src="/Lillia.github.io/2021/05/09/51-dan-pian-ji-jian-pan/image-20230108200340492.png"> <img src="/Lillia.github.io/2021/05/09/51-dan-pian-ji-jian-pan/image-20230108200355419.png"><p>usb接口直接选了usb母头，甚至没有选择micro-usb母口，这个设计直接被我师姐嘲讽。</p><img src="/Lillia.github.io/2021/05/09/51-dan-pian-ji-jian-pan/image-20230108200433576.png"><h2 id="外壳设计"><a href="#外壳设计" class="headerlink" title="外壳设计"></a><strong>外壳设计</strong></h2><p>刚才提到整块pcb是没有留钉位的（只留了smt贴片需要的四个1.1mm的定位孔）因此只能选用一个比较古老的家具结构——榫卯。如果要采用榫卯的话就拿钻头和锯子磨榫眼就是必须的操作了。</p><img src="/Lillia.github.io/2021/05/09/51-dan-pian-ji-jian-pan/image-20230108200742736.png"> <img src="/Lillia.github.io/2021/05/09/51-dan-pian-ji-jian-pan/image-20230108200805338.png"><p>这里的结构比较简单，其实就是边缘托起整块pcb，定位板和键轴，定位板和pcb间距大概是3.7mm，做成一种卡扣的形式。但需要注意pcb和定位板之间需要给卫星轴的铁支架留点位置，托住pcb的部分需要留给背面边缘的元件一点空间，具体实践起来并不难，实在有设计不周到的地方就拿锯子和电钻磨掉好了，反正做榫卯就要做这种磨合保证它卡稳。</p><p>因为选择了usb母口，太厚了，所以底板加厚到了5mm，因此整个外壳高度去到了17.8mm。剩下的事情就用3d打印好了，这里用的是abs光固化。（这里建议不要去tb，直接找厂家加工）</p><p>定位板则是直接选择了碳纤维板，把第一步里得到的switch layer（其实就是定位板）拿去给厂家加工。</p><h2 id="键帽"><a href="#键帽" class="headerlink" title="键帽"></a><strong>键帽</strong></h2><p>整套键盘应该说就是为了这套键帽服务的，也是去找tb定制的五面热升华</p><img src="/Lillia.github.io/2021/05/09/51-dan-pian-ji-jian-pan/image-20230108200855046.png"><p>无非就是在photoshop上，把第一步键盘布局的jpg加载的第一个图层，把想要的图放在第二个图层，在第一个图层选中好要抓取的位置以后切到第二个图层，就能把键位的图都抠下来了。（但我师姐还是指出这个搭配并不好看）</p><p>其实本来希望的效果是图片中央的部分直接贴在键帽上方，剩下的四边延伸一下贴在四个面，但自己并不会用Illustrator，老板也是第一次做这种形式的，所以最后可能效果并没有那么理想，但也还能接受。</p><p>键帽就是圣经诵读了。《我永远喜欢朱迪》《为莉莉娅献上心脏》。</p><img src="/Lillia.github.io/2021/05/09/51-dan-pian-ji-jian-pan/image-20230108200931737.png"> <img src="/Lillia.github.io/2021/05/09/51-dan-pian-ji-jian-pan/image-20230108200957619.png"><p>GitHub链接：<a target="_blank" rel="noopener" href="https://github.com/DidUSeeMyElk/51keyboard">DidUSeeMyElk/51keyboard: stc15单片机做的一个键盘 (github.com)</a></p></div><hr><div class="reprint" id="reprint-statement"><div class="reprint__author"><span class="reprint-meta" style="font-weight:700"><i class="fas fa-user">文章作者:</i></span> <span class="reprint-info"><a href="/Lillia.github.io/about" rel="external nofollow noreferrer">LYC</a></span></div><div class="reprint__type"><span class="reprint-meta" style="font-weight:700"><i class="fas fa-link">文章链接:</i></span> <span class="reprint-info"><a href="https://yuancongliang.github.io/Lillia.github.io/Lillia.github.io/2021/05/09/51-dan-pian-ji-jian-pan/">https://yuancongliang.github.io/Lillia.github.io/Lillia.github.io/2021/05/09/51-dan-pian-ji-jian-pan/</a></span></div><div class="reprint__notice"><span class="reprint-meta" style="font-weight:700"><i class="fas fa-copyright">版权声明:</i></span> <span class="reprint-info">本博客所有文章除特別声明外，均采用 <a href="https://creativecommons.org/licenses/by/4.0/deed.zh" rel="external nofollow noreferrer" target="_blank">CC BY 4.0</a> 许可协议。转载请注明来源 <a href="/Lillia.github.io/about" target="_blank">LYC</a> !</span></div></div><script async defer>document.addEventListener("copy", function (e) {
        let toastHTML = '<span>复制成功，请遵循本文的转载规则</span><button class="btn-flat toast-action" onclick="navToReprintStatement()" style="font-size: smaller">查看</a>';
        M.toast({html: toastHTML})
      });

      function navToReprintStatement() {
        $("html, body").animate({scrollTop: $("#reprint-statement").offset().top - 80}, 800);
      }</script><div class="tag_share" style="display:block"><div class="post-meta__tag-list" style="display:inline-block"><div class="article-tag"><a href="/Lillia.github.io/tags/blog/"><span class="chip bg-color">blog</span></a> <a href="/Lillia.github.io/tags/%E5%8D%95%E7%89%87%E6%9C%BA/"><span class="chip bg-color">单片机</span></a> <a href="/Lillia.github.io/tags/%E9%94%AE%E7%9B%98/"><span class="chip bg-color">键盘</span></a></div></div><div class="post_share" style="zoom:80%;width:fit-content;display:inline-block;float:right;margin:-.15rem 0"><link rel="stylesheet" href="/Lillia.github.io/libs/share/css/share.min.css"><div id="article-share"><div class="social-share" data-sites="twitter,facebook,google,qq,qzone,wechat,weibo,douban,linkedin" data-wechat-qrcode-helper="<p>微信扫一扫即可分享！</p>"></div><script src="/Lillia.github.io/libs/share/js/social-share.min.js"></script></div></div></div><div id="reward"><a href="#rewardModal" class="reward-link modal-trigger btn-floating btn-medium waves-effect waves-light red">赏</a><div id="rewardModal" class="modal"><div class="modal-content"><a class="close modal-close"><i class="fas fa-times"></i></a><h4 class="reward-title">你的赏识是我前进的动力</h4><div class="reward-content"><div class="reward-tabs"><ul class="tabs row"><li class="tab col s6 alipay-tab waves-effect waves-light"><a href="#alipay">支付宝</a></li><li class="tab col s6 wechat-tab waves-effect waves-light"><a href="#wechat">微 信</a></li></ul><div id="alipay"><img src="/Lillia.github.io/medias/reward/alipay.jpg" class="reward-img" alt="支付宝打赏二维码"></div><div id="wechat"><img src="/Lillia.github.io/medias/reward/wechat.png" class="reward-img" alt="微信打赏二维码"></div></div></div></div></div></div><script>$(function(){$(".tabs").tabs()})</script></div></div><style>.waline-card{margin:1.5rem auto}.waline-card .card-content{padding:20px 20px 5px 20px}#waline p{margin:2px 2px 10px;font-size:1.05rem;line-height:1.78rem}#waline blockquote p{text-indent:.2rem}#waline a{padding:0 2px;color:#4cbf30;font-weight:500;text-decoration:none}#waline img{max-width:100%;cursor:pointer}#waline ol li{list-style-type:decimal}#waline ol,ul{display:block;padding-left:2em;word-spacing:.05rem}#waline ul li,ol li{display:list-item;line-height:1.8rem;font-size:1rem}#waline ul li{list-style-type:disc}#waline ul ul li{list-style-type:circle}#waline table,td,th{padding:12px 13px;border:1px solid #dfe2e5}#waline table,td,th{border:0}table tr:nth-child(2n),thead{background-color:#fafafa}#waline table th{background-color:#f2f2f2;min-width:80px}#waline table td{min-width:80px}#waline h1{font-size:1.85rem;font-weight:700;line-height:2.2rem}#waline h2{font-size:1.65rem;font-weight:700;line-height:1.9rem}#waline h3{font-size:1.45rem;font-weight:700;line-height:1.7rem}#waline h4{font-size:1.25rem;font-weight:700;line-height:1.5rem}#waline h5{font-size:1.1rem;font-weight:700;line-height:1.4rem}#waline h6{font-size:1rem;line-height:1.3rem}#waline p{font-size:1rem;line-height:1.5rem}#waline hr{margin:12px 0;border:0;border-top:1px solid #ccc}#waline blockquote{margin:15px 0;border-left:5px solid #42b983;padding:1rem .8rem .3rem .8rem;color:#666;background-color:rgba(66,185,131,.1)}#waline pre{font-family:monospace,monospace;padding:1.2em;margin:.5em 0;background:#272822;overflow:auto;border-radius:.3em;tab-size:4}#waline code{font-family:monospace,monospace;padding:1px 3px;font-size:.92rem;color:#e96900;background-color:#f8f8f8;border-radius:2px}#waline pre code{font-family:monospace,monospace;padding:0;color:#e8eaf6;background-color:#272822}#waline pre[class*=language-]{padding:1.2em;margin:.5em 0}#waline code[class*=language-],pre[class*=language-]{color:#e8eaf6}#waline [type=checkbox]:not(:checked),[type=checkbox]:checked{position:inherit;margin-left:-1.3rem;margin-right:.4rem;margin-top:-1px;vertical-align:middle;left:unset;visibility:visible}#waline b,strong{font-weight:700}#waline dfn{font-style:italic}#waline small{font-size:85%}#waline cite{font-style:normal}#waline mark{background-color:#fcf8e3;padding:.2em}#waline table,td,th{padding:12px 13px;border:1px solid #dfe2e5}table tr:nth-child(2n),thead{background-color:#fafafa}#waline table th{background-color:#f2f2f2;min-width:80px}#waline table td{min-width:80px}#waline [type=checkbox]:not(:checked),[type=checkbox]:checked{position:inherit;margin-left:-1.3rem;margin-right:.4rem;margin-top:-1px;vertical-align:middle;left:unset;visibility:visible}</style><div class="card waline-card" data-aos="fade-up"><div class="comment_headling" style="font-size:20px;font-weight:700;position:relative;padding-left:20px;top:15px;padding-bottom:5px"><i class="fas fa-comments fa-fw" aria-hidden="true"></i> <span>评论</span></div><div id="waline" class="card-content" style="display:grid"></div></div><script src="/Lillia.github.io/libs/waline/Waline.min.js"></script><script>new Waline({el:"#waline",serverURL:"https://waline-comment-ftvhqdtn7-diduseemyelk.vercel.app/",avatar:"mm"})</script><article id="prenext-posts" class="prev-next articles"><div class="row article-row"><div class="article col s12 m6" data-aos="fade-up"><div class="article-badge left-badge text-color"><i class="fas fa-chevron-left"></i> &nbsp;上一篇</div><div class="card"><a href="/Lillia.github.io/2022/02/11/51-dan-pian-ji-duo-gong-neng-zhong/"><div class="card-image"><img src="/Lillia.github.io/medias/featureimages/21.jpg" class="responsive-img" alt="51单片机多功能钟"> <span class="card-title">51单片机多功能钟</span></div></a><div class="card-content article-content"><div class="summary block-with-text"></div><div class="publish-info"><span class="publish-date"><i class="far fa-clock fa-fw icon-date"></i> 2022-02-11</span><span class="publish-author"><i class="fas fa-bookmark fa-fw icon-category"></i> <a href="/Lillia.github.io/categories/%E5%8D%95%E7%89%87%E6%9C%BA/" class="post-category">单片机</a></span></div></div><div class="card-action article-tags"><a href="/Lillia.github.io/tags/blog/"><span class="chip bg-color">blog</span></a> <a href="/Lillia.github.io/tags/%E5%8D%95%E7%89%87%E6%9C%BA/"><span class="chip bg-color">单片机</span></a></div></div></div><div class="article col s12 m6" data-aos="fade-up"><div class="article-badge right-badge text-color">本篇&nbsp;<i class="far fa-dot-circle"></i></div><div class="card"><a href="/Lillia.github.io/2021/05/09/51-dan-pian-ji-jian-pan/"><div class="card-image"><img src="/Lillia.github.io/medias/featureimages/22.jpg" class="responsive-img" alt="51单片机键盘"> <span class="card-title">51单片机键盘</span></div></a><div class="card-content article-content"><div class="summary block-with-text"></div><div class="publish-info"><span class="publish-date"><i class="far fa-clock fa-fw icon-date"></i> 2021-05-09</span><span class="publish-author"><i class="fas fa-bookmark fa-fw icon-category"></i> <a href="/Lillia.github.io/categories/%E5%8D%95%E7%89%87%E6%9C%BA/" class="post-category">单片机</a></span></div></div><div class="card-action article-tags"><a href="/Lillia.github.io/tags/blog/"><span class="chip bg-color">blog</span></a> <a href="/Lillia.github.io/tags/%E5%8D%95%E7%89%87%E6%9C%BA/"><span class="chip bg-color">单片机</span></a> <a href="/Lillia.github.io/tags/%E9%94%AE%E7%9B%98/"><span class="chip bg-color">键盘</span></a></div></div></div></div></article></div><script src="/Lillia.github.io/libs/codeBlock/codeBlockFuction.js"></script><script src="/Lillia.github.io/libs/prism/prism.min.js"></script><script src="/Lillia.github.io/libs/codeBlock/codeLang.js"></script><script src="/Lillia.github.io/libs/codeBlock/codeCopy.js"></script><script src="/Lillia.github.io/libs/codeBlock/codeShrink.js"></script></div><div id="toc-aside" class="expanded col l3 hide-on-med-and-down"><div class="toc-widget card" style="background-color:#fff"><div class="toc-title"><i class="far fa-list-alt"></i>&nbsp;&nbsp;目录</div><div id="toc-content"></div></div></div></div><div id="floating-toc-btn" class="hide-on-med-and-down"><a class="btn-floating btn-large bg-color"><i class="fas fa-list-ul"></i></a></div><script src="/Lillia.github.io/libs/tocbot/tocbot.min.js"></script><script>$(function () {
        tocbot.init({
            tocSelector: '#toc-content',
            contentSelector: '#articleContent',
            headingsOffset: -($(window).height() * 0.4 - 45),
            collapseDepth: Number('0'),
            headingSelector: 'h2, h3, h4'
        });

        // Set scroll toc fixed.
        let tocHeight = parseInt($(window).height() * 0.4 - 64);
        let $tocWidget = $('.toc-widget');
        $(window).scroll(function () {
            let scroll = $(window).scrollTop();
            /* add post toc fixed. */
            if (scroll > tocHeight) {
                $tocWidget.addClass('toc-fixed');
            } else {
                $tocWidget.removeClass('toc-fixed');
            }
        });

        
        /* 修复文章卡片 div 的宽度. */
        let fixPostCardWidth = function (srcId, targetId) {
            let srcDiv = $('#' + srcId);
            if (srcDiv.length === 0) {
                return;
            }

            let w = srcDiv.width();
            if (w >= 450) {
                w = w + 21;
            } else if (w >= 350 && w < 450) {
                w = w + 18;
            } else if (w >= 300 && w < 350) {
                w = w + 16;
            } else {
                w = w + 14;
            }
            $('#' + targetId).width(w);
        };

        // 切换TOC目录展开收缩的相关操作.
        const expandedClass = 'expanded';
        let $tocAside = $('#toc-aside');
        let $mainContent = $('#main-content');
        $('#floating-toc-btn .btn-floating').click(function () {
            if ($tocAside.hasClass(expandedClass)) {
                $tocAside.removeClass(expandedClass).hide();
                $mainContent.removeClass('l9');
            } else {
                $tocAside.addClass(expandedClass).show();
                $mainContent.addClass('l9');
            }
            fixPostCardWidth('artDetail', 'prenext-posts');
        });
        
    });</script></main><footer class="page-footer bg-color"><div class="container row center-align" style="margin-bottom:15px!important"><div class="col s12 m8 l8 copy-right">Copyright&nbsp;&copy; <span id="year">2022-2023</span> <a href="/Lillia.github.io/about" target="_blank">LYC</a> |&nbsp;Powered by&nbsp;<a href="https://hexo.io/" target="_blank">Hexo</a> |&nbsp;Theme&nbsp;<a href="https://github.com/blinkfox/hexo-theme-matery" target="_blank">Matery</a><br>&nbsp;<i class="fas fa-chart-area"></i>&nbsp;站点总字数:&nbsp;<span class="white-color">17.9k</span> <span id="busuanzi_container_site_pv">&nbsp;|&nbsp;<i class="far fa-eye"></i>&nbsp;总访问量:&nbsp;<span id="busuanzi_value_site_pv" class="white-color"></span></span> <span id="busuanzi_container_site_uv">&nbsp;|&nbsp;<i class="fas fa-users"></i>&nbsp;总访问人数:&nbsp;<span id="busuanzi_value_site_uv" class="white-color"></span></span><br><span id="sitetime">Loading ...</span><script>var calcSiteTime=function(){var e=new Date,t="2022",n=e.getFullYear(),i=e.getMonth()+1,a=e.getDate(),r=e.getHours(),s=e.getMinutes(),o=e.getSeconds(),g=Date.UTC(t,"12","11","0","0","0"),d=Date.UTC(n,i,a,r,s,o)-g,m=Math.floor(d/31536e6),l=Math.floor(d/864e5-365*m);if(t===String(n)){document.getElementById("year").innerHTML=n;var c="This site has been running for "+l+" days";c="本站已运行 "+l+" 天",document.getElementById("sitetime").innerHTML=c}else{document.getElementById("year").innerHTML=t+" - "+n;var u="This site has been running for "+m+" years and "+l+" days";u="本站已运行 "+m+" 年 "+l+" 天",document.getElementById("sitetime").innerHTML=u}};calcSiteTime()</script><br></div><div class="col s12 m4 l4 social-link social-statis"><a href="https://github.com/YuancongLiang" class="tooltipped" target="_blank" data-tooltip="访问我的GitHub" data-position="top" data-delay="50"><i class="fab fa-github"></i></a><a href="mailto:e1kovo@stu2019.jnu.edu.cn" class="tooltipped" target="_blank" data-tooltip="邮件联系我" data-position="top" data-delay="50"><i class="fas fa-envelope-open"></i></a><a href="tencent://AddContact/?fromId=50&fromSubId=1&subcmd=all&uin=1035603730" class="tooltipped" target="_blank" data-tooltip="QQ联系我: 1035603730" data-position="top" data-delay="50"><i class="fab fa-qq"></i></a><a href="https://weibo.com/5602005765" class="tooltipped" target="_blank" data-tooltip="关注我的微博" data-position="top" data-delay="50"><i class="fab fa-weibo"></i></a> <a href="https://www.zhihu.com/people/candyseven-50" class="tooltipped" target="_blank" data-tooltip="关注我的知乎" data-position="top" data-delay="50"><i class="fab fa-zhihu1">知</i></a><a href="/Lillia.github.io/atom.xml" class="tooltipped" target="_blank" data-tooltip="RSS 订阅" data-position="top" data-delay="50"><i class="fas fa-rss"></i></a></div></div></footer><div class="progress-bar"></div><div id="searchModal" class="modal"><div class="modal-content"><div class="search-header"><span class="title"><i class="fas fa-search"></i> &nbsp;&nbsp;搜索</span> <input type="search" id="searchInput" name="s" placeholder="请输入搜索的关键字" class="search-input"></div><div id="searchResult"></div></div></div><script>$(function(){!function(t,i,a){"use strict";$.ajax({url:t,dataType:"xml",success:function(t){var e=$("entry",t).map(function(){return{title:$("title",this).text(),content:$("content",this).text(),url:$("url",this).text()}}).get(),r=document.getElementById(i),n=document.getElementById(a);r.addEventListener("input",function(){var f='<ul class="search-result-list">',m=this.value.trim().toLowerCase().split(/[\s\-]+/);n.innerHTML="",this.value.trim().length<=0||(e.forEach(function(t){var r=!0,n=t.title.trim().toLowerCase(),i=t.content.trim().replace(/<[^>]+>/g,"").toLowerCase(),e=t.url;e=0===e.indexOf("/")?t.url:"/"+e;var a=-1,s=-1,l=-1;if(""!==n&&""!==i&&m.forEach(function(t,e){a=n.indexOf(t),s=i.indexOf(t),a<0&&s<0?r=!1:(s<0&&(s=0),0===e&&(l=s))}),r){f+="<li><a href='"+e+"' class='search-result-title'>"+n+"</a>";var c=t.content.trim().replace(/<[^>]+>/g,"");if(0<=l){var u=l-20,o=l+80;u<0&&(u=0),0===u&&(o=100),o>c.length&&(o=c.length);var h=c.substr(u,o);m.forEach(function(t){var e=new RegExp(t,"gi");h=h.replace(e,'<em class="search-keyword">'+t+"</em>")}),f+='<p class="search-result">'+h+"...</p>"}f+="</li>"}}),f+="</ul>",n.innerHTML=f)})}})}("/Lillia.github.io/search.xml","searchInput","searchResult")})</script><div class="stars-con"><div id="stars"></div><div id="stars2"></div><div id="stars3"></div></div><script>function switchNightMode(){$('<div class="Cuteen_DarkSky"><div class="Cuteen_DarkPlanet"></div></div>').appendTo($("body")),setTimeout(function(){$("body").hasClass("DarkMode")?($("body").removeClass("DarkMode"),localStorage.setItem("isDark","0"),$("#sum-moon-icon").removeClass("fa-sun").addClass("fa-moon")):($("body").addClass("DarkMode"),localStorage.setItem("isDark","1"),$("#sum-moon-icon").addClass("fa-sun").removeClass("fa-moon")),setTimeout(function(){$(".Cuteen_DarkSky").fadeOut(1e3,function(){$(this).remove()})},2e3)})}</script><div id="backTop" class="top-scroll"><a class="btn-floating btn-large waves-effect waves-light" href="#!"><i class="fas fa-arrow-up"></i></a></div><script src="/Lillia.github.io/libs/materialize/materialize.min.js"></script><script src="/Lillia.github.io/libs/masonry/masonry.pkgd.min.js"></script><script src="/Lillia.github.io/libs/aos/aos.js"></script><script src="/Lillia.github.io/libs/scrollprogress/scrollProgress.min.js"></script><script src="/Lillia.github.io/libs/lightGallery/js/lightgallery-all.min.js"></script><script src="/Lillia.github.io/js/matery.js"></script><script src="https://yuancongliang.github.io/Lillia.github.io/live2d-widget/autoload.js"></script><script src="https://ssl.captcha.qq.com/TCaptcha.js"></script><script src="/Lillia.github.io/libs/others/TencentCaptcha.js"></script><button id="TencentCaptcha" data-appid="xxxxxxxxxx" data-cbfn="callback" type="button" hidden></button><script>!function(){var t=document.createElement("script"),e=window.location.protocol.split(":")[0];t.src="https"===e?"https://zz.bdstatic.com/linksubmit/push.js":"http://push.zhanzhang.baidu.com/push.js";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(t,s)}()</script><script src="/Lillia.github.io/libs/others/clicklove.js" async></script><script async src="/Lillia.github.io/libs/others/busuanzi.pure.mini.js"></script><div style="position:fixed;bottom:125px;right:16px;cursor:pointer"><a title="兔小巢" target="_blank" rel="noopener" href="https://support.qq.com/products/491953"><i class="fa fa-comments fa-3x" aria-hidden="true"></i></a></div><script src="/Lillia.github.io/libs/instantpage/instantpage.js" type="module"></script></body></html>