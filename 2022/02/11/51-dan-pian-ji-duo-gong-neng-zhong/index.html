<!DOCTYPE HTML><html lang="zh-CN"><head><meta charset="utf-8"><meta name="keywords" content="51单片机多功能钟, 莉莉娅！"><meta name="description" content="知乎链接51单片机多功能钟的功能实现记录（7） - 知乎 (zhihu.com)
51单片机多功能钟的功能实现记录（6） - 知乎 (zhihu.com)
51单片机多功能钟的功能实现记录（5） - 知乎 (zhihu.com)
51单片机"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no"><meta name="renderer" content="webkit|ie-stand|ie-comp"><meta name="mobile-web-app-capable" content="yes"><meta name="format-detection" content="telephone=no"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"><meta name="referrer" content="no-referrer-when-downgrade"><title>51单片机多功能钟 | 莉莉娅！</title><link rel="icon" type="image/png" href="/Lillia.github.io/favicon.png"><link rel="stylesheet" href="/Lillia.github.io/libs/awesome/css/all.min.css"><link rel="stylesheet" href="/Lillia.github.io/libs/materialize/materialize.min.css"><link rel="stylesheet" href="/Lillia.github.io/libs/aos/aos.css"><link rel="stylesheet" href="/Lillia.github.io/libs/animate/animate.min.css"><link rel="stylesheet" href="/Lillia.github.io/libs/lightGallery/css/lightgallery.min.css"><link rel="stylesheet" href="/Lillia.github.io/css/matery.css"><link rel="stylesheet" href="/Lillia.github.io/css/my.css"><link rel="stylesheet" href="/Lillia.github.io/css/dark.css" media="none" onload='"all"!=media&&(media="all")'><link rel="stylesheet" href="/Lillia.github.io/libs/tocbot/tocbot.css"><link rel="stylesheet" href="/Lillia.github.io/css/post.css"><link rel="stylesheet" href="/Lillia.github.io/css/reward.css"><script src="/Lillia.github.io/libs/jquery/jquery-3.6.0.min.js"></script><meta name="generator" content="Hexo 6.3.0"><style>.github-emoji{position:relative;display:inline-block;width:1.2em;min-height:1.2em;overflow:hidden;vertical-align:top;color:transparent}.github-emoji>span{position:relative;z-index:10}.github-emoji .fancybox,.github-emoji img{margin:0!important;padding:0!important;border:none!important;outline:0!important;text-decoration:none!important;user-select:none!important;cursor:auto!important}.github-emoji img{height:1.2em!important;width:1.2em!important;position:absolute!important;left:50%!important;top:50%!important;transform:translate(-50%,-50%)!important;user-select:none!important;cursor:auto!important}.github-emoji-fallback{color:inherit}.github-emoji-fallback img{opacity:0!important}</style><link rel="alternate" href="/Lillia.github.io/atom.xml" title="莉莉娅！" type="application/atom+xml"></head><body><header class="navbar-fixed"><nav id="headNav" class="bg-color nav-transparent"><div id="navContainer" class="nav-wrapper container"><div class="brand-logo"><a href="/Lillia.github.io/" class="waves-effect waves-light"><img src="/Lillia.github.io/medias/logo.png" class="logo-img" alt="LOGO"> <span class="logo-span">莉莉娅！</span></a></div><a href="#" data-target="mobile-nav" class="sidenav-trigger button-collapse"><i class="fas fa-bars"></i></a><ul class="right nav-menu"><li class="hide-on-med-and-down nav-item"><a href="/Lillia.github.io/" class="waves-effect waves-light"><i class="fas fa-home" style="zoom:.6"></i> <span>首页</span></a></li><li class="hide-on-med-and-down nav-item"><a href="/Lillia.github.io/tags" class="waves-effect waves-light"><i class="fas fa-tags" style="zoom:.6"></i> <span>标签</span></a></li><li class="hide-on-med-and-down nav-item"><a href="/Lillia.github.io/categories" class="waves-effect waves-light"><i class="fas fa-bookmark" style="zoom:.6"></i> <span>分类</span></a></li><li class="hide-on-med-and-down nav-item"><a href="/Lillia.github.io/archives" class="waves-effect waves-light"><i class="fas fa-archive" style="zoom:.6"></i> <span>归档</span></a></li><li class="hide-on-med-and-down nav-item"><a href="/Lillia.github.io/about" class="waves-effect waves-light"><i class="fas fa-user-circle" style="zoom:.6"></i> <span>关于</span></a></li><li class="hide-on-med-and-down nav-item"><a href="/Lillia.github.io/contact" class="waves-effect waves-light"><i class="fas fa-comments" style="zoom:.6"></i> <span>留言板</span></a></li><li class="hide-on-med-and-down nav-item"><a href="/Lillia.github.io/friends" class="waves-effect waves-light"><i class="fas fa-address-book" style="zoom:.6"></i> <span>友情链接</span></a></li><li><a href="#searchModal" class="modal-trigger waves-effect waves-light"><i id="searchIcon" class="fas fa-search" title="搜索" style="zoom:.85"></i></a></li><li><a href="javascript:;" class="waves-effect waves-light" onclick="switchNightMode()" title="深色/浅色模式"><i id="sum-moon-icon" class="fas fa-sun" style="zoom:.85"></i></a></li></ul><div id="mobile-nav" class="side-nav sidenav"><div class="mobile-head bg-color"><img src="/Lillia.github.io/medias/logo.png" class="logo-img circle responsive-img"><div class="logo-name">莉莉娅！</div><div class="logo-desc">Never really desperate, only the lost of the soul.</div></div><ul class="menu-list mobile-menu-list"><li class="m-nav-item"><a href="/Lillia.github.io/" class="waves-effect waves-light"><i class="fa-fw fas fa-home"></i> 首页</a></li><li class="m-nav-item"><a href="/Lillia.github.io/tags" class="waves-effect waves-light"><i class="fa-fw fas fa-tags"></i> 标签</a></li><li class="m-nav-item"><a href="/Lillia.github.io/categories" class="waves-effect waves-light"><i class="fa-fw fas fa-bookmark"></i> 分类</a></li><li class="m-nav-item"><a href="/Lillia.github.io/archives" class="waves-effect waves-light"><i class="fa-fw fas fa-archive"></i> 归档</a></li><li class="m-nav-item"><a href="/Lillia.github.io/about" class="waves-effect waves-light"><i class="fa-fw fas fa-user-circle"></i> 关于</a></li><li class="m-nav-item"><a href="/Lillia.github.io/contact" class="waves-effect waves-light"><i class="fa-fw fas fa-comments"></i> 留言板</a></li><li class="m-nav-item"><a href="/Lillia.github.io/friends" class="waves-effect waves-light"><i class="fa-fw fas fa-address-book"></i> 友情链接</a></li><li><div class="divider"></div></li><li><a href="https://github.com/YuancongLiang" class="waves-effect waves-light" target="_blank"><i class="fab fa-github-square fa-fw"></i> Fork Me</a></li></ul></div></div><style>.nav-transparent .github-corner{display:none!important}.github-corner{position:absolute;z-index:10;top:0;right:0;border:0;transform:scale(1.1)}.github-corner svg{color:#0f9d58;fill:#fff;height:64px;width:64px}.github-corner:hover .octo-arm{animation:a .56s ease-in-out}.github-corner .octo-arm{animation:none}@keyframes a{0%,to{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}</style><a href="https://github.com/YuancongLiang" class="github-corner tooltipped hide-on-med-and-down" target="_blank" data-tooltip="Fork Me" data-position="left" data-delay="50"><svg viewBox="0 0 250 250" aria-hidden="true"><path d="M0 0 115 115 130 115 142 142 250 250 250 0Z"></path><path d="M128.3 109C113.8 99.7 119 89.6 119 89.6 122 82.7 120.5 78.6 120.5 78.6 119.2 72 123.4 76.3 123.4 76.3 127.3 80.9 125.5 87.3 125.5 87.3 122.9 97.6 130.6 101.9 134.4 103.2" fill="currentColor" style="transform-origin:130px 106px" class="octo-arm"></path><path d="M115 115C114.9 115.1 118.7 116.5 119.8 115.4L133.7 101.6C136.9 99.2 139.9 98.4 142.2 98.6 133.8 88 127.5 74.4 143.8 58 148.5 53.4 154 51.2 159.7 51 160.3 49.4 163.2 43.6 171.4 40.1 171.4 40.1 176.1 42.5 178.8 56.2 183.1 58.6 187.2 61.8 190.9 65.4 194.5 69 197.7 73.2 200.1 77.6 213.8 80.2 216.3 84.9 216.3 84.9 212.7 93.1 206.9 96 205.4 96.6 205.1 102.4 203 107.8 198.3 112.5 181.9 128.9 168.3 122.5 157.7 114.1 157.9 116.9 156.7 120.9 152.7 124.9L141 136.5C139.8 137.7 141.6 141.9 141.8 141.8Z" fill="currentColor" class="octo-body"></path></svg></a></nav></header><div class="bg-cover pd-header post-cover" style="background-image:url(/Lillia.github.io/medias/featureimages/21.jpg)"><div class="container" style="right:0;left:0"><div class="row"><div class="col s12 m12 l12"><div class="brand"><h1 class="description center-align post-title">51单片机多功能钟</h1></div></div></div></div></div><main class="post-container content"><div class="row"><div id="main-content" class="col s12 m12 l9"><div id="artDetail"><div class="card"><div class="card-content article-info"><div class="row tag-cate"><div class="col s7"><div class="article-tag"><a href="/Lillia.github.io/tags/blog/"><span class="chip bg-color">blog</span></a> <a href="/Lillia.github.io/tags/%E5%8D%95%E7%89%87%E6%9C%BA/"><span class="chip bg-color">单片机</span></a></div></div><div class="col s5 right-align"><div class="post-cate"><i class="fas fa-bookmark fa-fw icon-category"></i> <a href="/Lillia.github.io/categories/%E5%8D%95%E7%89%87%E6%9C%BA/" class="post-category">单片机</a></div></div></div><div class="post-info"><div class="post-date info-break-policy"><i class="far fa-calendar-minus fa-fw"></i> 发布日期:&nbsp;&nbsp; 2022-02-11</div><div class="info-break-policy"><i class="far fa-file-word fa-fw"></i> 文章字数:&nbsp;&nbsp; 1.5k</div></div></div><hr class="clearfix"><link rel="stylesheet" href="/Lillia.github.io/libs/prism/prism.min.css"><div class="card-content article-card-content"><div id="articleContent"><h2 id="知乎链接"><a href="#知乎链接" class="headerlink" title="知乎链接"></a>知乎链接</h2><p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/465914774">51单片机多功能钟的功能实现记录（7） - 知乎 (zhihu.com)</a></p><p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/353607938">51单片机多功能钟的功能实现记录（6） - 知乎 (zhihu.com)</a></p><p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/353582224">51单片机多功能钟的功能实现记录（5） - 知乎 (zhihu.com)</a></p><p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/350620136">51单片机多功能钟的功能实现记录（4） - 知乎 (zhihu.com)</a></p><p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/350355949">51单片机多功能钟的功能实现记录（3） - 知乎 (zhihu.com)</a></p><p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/350321130">51单片机多功能钟的功能实现记录（2） - 知乎 (zhihu.com)</a></p><p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/350251379">51单片机多功能钟的功能实现记录（1） - 知乎 (zhihu.com)</a></p><h2 id="正文"><a href="#正文" class="headerlink" title="正文"></a>正文</h2><p>我并不想把所有知乎内容都搬过来个人博客，一个是因为内容过于分散，另一个是这个作品是最开始做的，知乎也是刚开始写的，很多东西今天看起来都有点过时了，而且作为一个记录，代码上的细节知乎上有就可以了，个人的博客里不一定还需要另一篇一模一样地文章，我还是希望从另一个角度写一下这个作品。</p><p>这个作品是利用51单片机做一个多功能钟，首先它的是个钟，然后再有多功能。于是我们就先从钟这个角度入手，先实现钟的功能。</p><p>那么开发板上是有ds1302模块的，他能实现一个时钟的计时，我们还需要想想看钟要用什么屏幕对吧。</p><p>第一，数码管。用数码管的话你就要考虑我后续加功能的话，比如要显示温度湿度，怎么显示，这就很麻烦。</p><p>第二，LCD。用LCD就有一定的自由度，但你也要考虑，是用8pin的数据脚，还是用i2c接口。</p><p>当时我还是刚开始学，开发板时钟例程用LCD就是8pin数据脚不用i2c的，那自然我是在这个基础上做的，但是这个例程是不带时间调整的，所以还要加上按键的时间调整，如果可以的话还要加上蓝牙。</p><p>一个钟你还得有闹钟功能吧，你还要说是多功能，那得是还多弄几个功能，比如什么计时器之类的。</p><p>ok那要做的工作就出来了，分为三个部分：</p><p>首先是按键的使用和功能的切换，也就是按键能够拿去调时间，也能够拿去切换不同的模式，把框架主体定下来，再把功能模块往里填，大概记录在了文章（1）。</p><p>第二是功能主体的建设，包括调整时间怎么调整，怎么把调好的时间传入给ds1302，计时器怎么实现，闹钟怎么实现，也是篇幅最大的，文章（3）（4）（6）都是记录这部分的。</p><p>第三部分是外设的实现，包括LCD的驱动，和DHT11温湿度传感器的时序与使用，记录在了文章（2）。</p><p>剩下的就是程序的优化，因为一开始写的代码有点屎山，51的那点资源不够我折腾了，所以提前进行了重构，当然重构了也是依托答辩，文章（5）记录这部分。</p><p>到这里，软件部分就完成了，剩下的就是硬件PCB和作品外壳的设计了，这部分记录在了文章（7）。</p><p>这看起来到这里就完成了，但有一个问题是文章里没有怎么提及的，那就是硬件资源问题。在文章里的按键设计是把八个按键全部用上了，但这就有一个问题，我们知道按键的触发要么通过中断，要么通过循环等待响应。八个按键要中断触发就只能额外通过与门实现，在开发板上不好实现；如果是通过循环等待响应，那程序的大部分时间就都在等待按键，只能从中抽出点时间去完成温湿度，显示更新等功能，当你功能不多的时候还好，功能多起来了，时间就很长，又反过来导致大部分时间都在等待程序运行，没有检测按键，导致按键反馈不行。如果是今天再让我去做这个作品，我当然知道应该搭个实验板，接几个与门，用中断触发，但当时我是不会的，这毕竟是第一个开始做的作品，动手能力还是比较差。这个问题后来我也发现做硬件很多时候不能只盯着代码，也要注意硬件的支持。流程也不是非得先写代码，再根据代码画硬件PCB的，也是需要互相结合的。当然这些内容很多我都在做键盘的时候遇到了，那块键盘还是挺喜欢的，所以这些问题都积累了不少的经验，也算是些经历吧。</p><p>还有就是电源管理了，必须得说这种自带电源的作品设计是需要一点经验的，因为后来疫情吧，很多时候都进不了实验室干活，在家很多东西都没办法完成，所以后来的两个作品都是不自带电源了，用的USB供电。多了个电池，不管是电路设计上，还是外壳设计都挺麻烦的。后来还有一次自带电源的作品是传感器实验那门课的期末作业，是直接买的带充放电稳压的电池了，自己不设计电源电路了，当然后来作业也交上去了，资料也基本删了，就没办法展示了。其实我还挺喜欢那个作业的，里面还有个PID的控速，就是汇报的时候没讲好，老师听不懂，没给太高的分，挺可惜的。</p></div><hr><div class="reprint" id="reprint-statement"><div class="reprint__author"><span class="reprint-meta" style="font-weight:700"><i class="fas fa-user">文章作者:</i></span> <span class="reprint-info"><a href="/Lillia.github.io/about" rel="external nofollow noreferrer">LYC</a></span></div><div class="reprint__type"><span class="reprint-meta" style="font-weight:700"><i class="fas fa-link">文章链接:</i></span> <span class="reprint-info"><a href="https://yuancongliang.github.io/Lillia.github.io/Lillia.github.io/2022/02/11/51-dan-pian-ji-duo-gong-neng-zhong/">https://yuancongliang.github.io/Lillia.github.io/Lillia.github.io/2022/02/11/51-dan-pian-ji-duo-gong-neng-zhong/</a></span></div><div class="reprint__notice"><span class="reprint-meta" style="font-weight:700"><i class="fas fa-copyright">版权声明:</i></span> <span class="reprint-info">本博客所有文章除特別声明外，均采用 <a href="https://creativecommons.org/licenses/by/4.0/deed.zh" rel="external nofollow noreferrer" target="_blank">CC BY 4.0</a> 许可协议。转载请注明来源 <a href="/Lillia.github.io/about" target="_blank">LYC</a> !</span></div></div><script async defer>document.addEventListener("copy", function (e) {
        let toastHTML = '<span>复制成功，请遵循本文的转载规则</span><button class="btn-flat toast-action" onclick="navToReprintStatement()" style="font-size: smaller">查看</a>';
        M.toast({html: toastHTML})
      });

      function navToReprintStatement() {
        $("html, body").animate({scrollTop: $("#reprint-statement").offset().top - 80}, 800);
      }</script><div class="tag_share" style="display:block"><div class="post-meta__tag-list" style="display:inline-block"><div class="article-tag"><a href="/Lillia.github.io/tags/blog/"><span class="chip bg-color">blog</span></a> <a href="/Lillia.github.io/tags/%E5%8D%95%E7%89%87%E6%9C%BA/"><span class="chip bg-color">单片机</span></a></div></div><div class="post_share" style="zoom:80%;width:fit-content;display:inline-block;float:right;margin:-.15rem 0"><link rel="stylesheet" href="/Lillia.github.io/libs/share/css/share.min.css"><div id="article-share"><div class="social-share" data-sites="twitter,facebook,google,qq,qzone,wechat,weibo,douban,linkedin" data-wechat-qrcode-helper="<p>微信扫一扫即可分享！</p>"></div><script src="/Lillia.github.io/libs/share/js/social-share.min.js"></script></div></div></div><div id="reward"><a href="#rewardModal" class="reward-link modal-trigger btn-floating btn-medium waves-effect waves-light red">赏</a><div id="rewardModal" class="modal"><div class="modal-content"><a class="close modal-close"><i class="fas fa-times"></i></a><h4 class="reward-title">你的赏识是我前进的动力</h4><div class="reward-content"><div class="reward-tabs"><ul class="tabs row"><li class="tab col s6 alipay-tab waves-effect waves-light"><a href="#alipay">支付宝</a></li><li class="tab col s6 wechat-tab waves-effect waves-light"><a href="#wechat">微 信</a></li></ul><div id="alipay"><img src="/Lillia.github.io/medias/reward/alipay.jpg" class="reward-img" alt="支付宝打赏二维码"></div><div id="wechat"><img src="/Lillia.github.io/medias/reward/wechat.png" class="reward-img" alt="微信打赏二维码"></div></div></div></div></div></div><script>$(function(){$(".tabs").tabs()})</script></div></div><style>.waline-card{margin:1.5rem auto}.waline-card .card-content{padding:20px 20px 5px 20px}#waline p{margin:2px 2px 10px;font-size:1.05rem;line-height:1.78rem}#waline blockquote p{text-indent:.2rem}#waline a{padding:0 2px;color:#4cbf30;font-weight:500;text-decoration:none}#waline img{max-width:100%;cursor:pointer}#waline ol li{list-style-type:decimal}#waline ol,ul{display:block;padding-left:2em;word-spacing:.05rem}#waline ul li,ol li{display:list-item;line-height:1.8rem;font-size:1rem}#waline ul li{list-style-type:disc}#waline ul ul li{list-style-type:circle}#waline table,td,th{padding:12px 13px;border:1px solid #dfe2e5}#waline table,td,th{border:0}table tr:nth-child(2n),thead{background-color:#fafafa}#waline table th{background-color:#f2f2f2;min-width:80px}#waline table td{min-width:80px}#waline h1{font-size:1.85rem;font-weight:700;line-height:2.2rem}#waline h2{font-size:1.65rem;font-weight:700;line-height:1.9rem}#waline h3{font-size:1.45rem;font-weight:700;line-height:1.7rem}#waline h4{font-size:1.25rem;font-weight:700;line-height:1.5rem}#waline h5{font-size:1.1rem;font-weight:700;line-height:1.4rem}#waline h6{font-size:1rem;line-height:1.3rem}#waline p{font-size:1rem;line-height:1.5rem}#waline hr{margin:12px 0;border:0;border-top:1px solid #ccc}#waline blockquote{margin:15px 0;border-left:5px solid #42b983;padding:1rem .8rem .3rem .8rem;color:#666;background-color:rgba(66,185,131,.1)}#waline pre{font-family:monospace,monospace;padding:1.2em;margin:.5em 0;background:#272822;overflow:auto;border-radius:.3em;tab-size:4}#waline code{font-family:monospace,monospace;padding:1px 3px;font-size:.92rem;color:#e96900;background-color:#f8f8f8;border-radius:2px}#waline pre code{font-family:monospace,monospace;padding:0;color:#e8eaf6;background-color:#272822}#waline pre[class*=language-]{padding:1.2em;margin:.5em 0}#waline code[class*=language-],pre[class*=language-]{color:#e8eaf6}#waline [type=checkbox]:not(:checked),[type=checkbox]:checked{position:inherit;margin-left:-1.3rem;margin-right:.4rem;margin-top:-1px;vertical-align:middle;left:unset;visibility:visible}#waline b,strong{font-weight:700}#waline dfn{font-style:italic}#waline small{font-size:85%}#waline cite{font-style:normal}#waline mark{background-color:#fcf8e3;padding:.2em}#waline table,td,th{padding:12px 13px;border:1px solid #dfe2e5}table tr:nth-child(2n),thead{background-color:#fafafa}#waline table th{background-color:#f2f2f2;min-width:80px}#waline table td{min-width:80px}#waline [type=checkbox]:not(:checked),[type=checkbox]:checked{position:inherit;margin-left:-1.3rem;margin-right:.4rem;margin-top:-1px;vertical-align:middle;left:unset;visibility:visible}</style><div class="card waline-card" data-aos="fade-up"><div class="comment_headling" style="font-size:20px;font-weight:700;position:relative;padding-left:20px;top:15px;padding-bottom:5px"><i class="fas fa-comments fa-fw" aria-hidden="true"></i> <span>评论</span></div><div id="waline" class="card-content" style="display:grid"></div></div><script src="/Lillia.github.io/libs/waline/Waline.min.js"></script><script>new Waline({el:"#waline",serverURL:"https://waline-comment-ftvhqdtn7-diduseemyelk.vercel.app/",avatar:"mm"})</script><article id="prenext-posts" class="prev-next articles"><div class="row article-row"><div class="article col s12 m6" data-aos="fade-up"><div class="article-badge left-badge text-color"><i class="fas fa-chevron-left"></i> &nbsp;上一篇</div><div class="card"><a href="/Lillia.github.io/2023/01/11/xing-ren-jian-ce-demo/"><div class="card-image"><img src="/Lillia.github.io/medias/featureimages/4.jpg" class="responsive-img" alt="行人检测demo"> <span class="card-title">行人检测demo</span></div></a><div class="card-content article-content"><div class="summary block-with-text"></div><div class="publish-info"><span class="publish-date"><i class="far fa-clock fa-fw icon-date"></i> 2023-01-11</span><span class="publish-author"><i class="fas fa-bookmark fa-fw icon-category"></i> <a href="/Lillia.github.io/categories/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/" class="post-category">深度学习</a></span></div></div><div class="card-action article-tags"><a href="/Lillia.github.io/tags/blog/"><span class="chip bg-color">blog</span></a> <a href="/Lillia.github.io/tags/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/"><span class="chip bg-color">深度学习</span></a> <a href="/Lillia.github.io/tags/YOLOv5/"><span class="chip bg-color">YOLOv5</span></a> <a href="/Lillia.github.io/tags/DeepSORT/"><span class="chip bg-color">DeepSORT</span></a></div></div></div><div class="article col s12 m6" data-aos="fade-up"><div class="article-badge right-badge text-color">下一篇&nbsp;<i class="fas fa-chevron-right"></i></div><div class="card"><a href="/Lillia.github.io/2021/05/09/51-dan-pian-ji-jian-pan/"><div class="card-image"><img src="/Lillia.github.io/medias/featureimages/22.jpg" class="responsive-img" alt="51单片机键盘"> <span class="card-title">51单片机键盘</span></div></a><div class="card-content article-content"><div class="summary block-with-text"></div><div class="publish-info"><span class="publish-date"><i class="far fa-clock fa-fw icon-date"></i> 2021-05-09</span><span class="publish-author"><i class="fas fa-bookmark fa-fw icon-category"></i> <a href="/Lillia.github.io/categories/%E5%8D%95%E7%89%87%E6%9C%BA/" class="post-category">单片机</a></span></div></div><div class="card-action article-tags"><a href="/Lillia.github.io/tags/blog/"><span class="chip bg-color">blog</span></a> <a href="/Lillia.github.io/tags/%E5%8D%95%E7%89%87%E6%9C%BA/"><span class="chip bg-color">单片机</span></a> <a href="/Lillia.github.io/tags/%E9%94%AE%E7%9B%98/"><span class="chip bg-color">键盘</span></a></div></div></div></div></article></div><script src="/Lillia.github.io/libs/codeBlock/codeBlockFuction.js"></script><script src="/Lillia.github.io/libs/prism/prism.min.js"></script><script src="/Lillia.github.io/libs/codeBlock/codeLang.js"></script><script src="/Lillia.github.io/libs/codeBlock/codeCopy.js"></script><script src="/Lillia.github.io/libs/codeBlock/codeShrink.js"></script></div><div id="toc-aside" class="expanded col l3 hide-on-med-and-down"><div class="toc-widget card" style="background-color:#fff"><div class="toc-title"><i class="far fa-list-alt"></i>&nbsp;&nbsp;目录</div><div id="toc-content"></div></div></div></div><div id="floating-toc-btn" class="hide-on-med-and-down"><a class="btn-floating btn-large bg-color"><i class="fas fa-list-ul"></i></a></div><script src="/Lillia.github.io/libs/tocbot/tocbot.min.js"></script><script>$(function () {
        tocbot.init({
            tocSelector: '#toc-content',
            contentSelector: '#articleContent',
            headingsOffset: -($(window).height() * 0.4 - 45),
            collapseDepth: Number('0'),
            headingSelector: 'h2, h3, h4'
        });

        // Set scroll toc fixed.
        let tocHeight = parseInt($(window).height() * 0.4 - 64);
        let $tocWidget = $('.toc-widget');
        $(window).scroll(function () {
            let scroll = $(window).scrollTop();
            /* add post toc fixed. */
            if (scroll > tocHeight) {
                $tocWidget.addClass('toc-fixed');
            } else {
                $tocWidget.removeClass('toc-fixed');
            }
        });

        
        /* 修复文章卡片 div 的宽度. */
        let fixPostCardWidth = function (srcId, targetId) {
            let srcDiv = $('#' + srcId);
            if (srcDiv.length === 0) {
                return;
            }

            let w = srcDiv.width();
            if (w >= 450) {
                w = w + 21;
            } else if (w >= 350 && w < 450) {
                w = w + 18;
            } else if (w >= 300 && w < 350) {
                w = w + 16;
            } else {
                w = w + 14;
            }
            $('#' + targetId).width(w);
        };

        // 切换TOC目录展开收缩的相关操作.
        const expandedClass = 'expanded';
        let $tocAside = $('#toc-aside');
        let $mainContent = $('#main-content');
        $('#floating-toc-btn .btn-floating').click(function () {
            if ($tocAside.hasClass(expandedClass)) {
                $tocAside.removeClass(expandedClass).hide();
                $mainContent.removeClass('l9');
            } else {
                $tocAside.addClass(expandedClass).show();
                $mainContent.addClass('l9');
            }
            fixPostCardWidth('artDetail', 'prenext-posts');
        });
        
    });</script></main><footer class="page-footer bg-color"><div class="container row center-align" style="margin-bottom:15px!important"><div class="col s12 m8 l8 copy-right">Copyright&nbsp;&copy; <span id="year">2022-2023</span> <a href="/Lillia.github.io/about" target="_blank">LYC</a> |&nbsp;Powered by&nbsp;<a href="https://hexo.io/" target="_blank">Hexo</a> |&nbsp;Theme&nbsp;<a href="https://github.com/blinkfox/hexo-theme-matery" target="_blank">Matery</a><br>&nbsp;<i class="fas fa-chart-area"></i>&nbsp;站点总字数:&nbsp;<span class="white-color">12.2k</span> <span id="busuanzi_container_site_pv">&nbsp;|&nbsp;<i class="far fa-eye"></i>&nbsp;总访问量:&nbsp;<span id="busuanzi_value_site_pv" class="white-color"></span></span> <span id="busuanzi_container_site_uv">&nbsp;|&nbsp;<i class="fas fa-users"></i>&nbsp;总访问人数:&nbsp;<span id="busuanzi_value_site_uv" class="white-color"></span></span><br><span id="sitetime">Loading ...</span><script>var calcSiteTime=function(){var e=new Date,t="2022",n=e.getFullYear(),i=e.getMonth()+1,a=e.getDate(),r=e.getHours(),s=e.getMinutes(),o=e.getSeconds(),g=Date.UTC(t,"12","11","0","0","0"),d=Date.UTC(n,i,a,r,s,o)-g,m=Math.floor(d/31536e6),l=Math.floor(d/864e5-365*m);if(t===String(n)){document.getElementById("year").innerHTML=n;var c="This site has been running for "+l+" days";c="本站已运行 "+l+" 天",document.getElementById("sitetime").innerHTML=c}else{document.getElementById("year").innerHTML=t+" - "+n;var u="This site has been running for "+m+" years and "+l+" days";u="本站已运行 "+m+" 年 "+l+" 天",document.getElementById("sitetime").innerHTML=u}};calcSiteTime()</script><br></div><div class="col s12 m4 l4 social-link social-statis"><a href="https://github.com/YuancongLiang" class="tooltipped" target="_blank" data-tooltip="访问我的GitHub" data-position="top" data-delay="50"><i class="fab fa-github"></i></a><a href="mailto:e1kovo@stu2019.jnu.edu.cn" class="tooltipped" target="_blank" data-tooltip="邮件联系我" data-position="top" data-delay="50"><i class="fas fa-envelope-open"></i></a><a href="tencent://AddContact/?fromId=50&fromSubId=1&subcmd=all&uin=1035603730" class="tooltipped" target="_blank" data-tooltip="QQ联系我: 1035603730" data-position="top" data-delay="50"><i class="fab fa-qq"></i></a><a href="https://weibo.com/5602005765" class="tooltipped" target="_blank" data-tooltip="关注我的微博" data-position="top" data-delay="50"><i class="fab fa-weibo"></i></a> <a href="https://www.zhihu.com/people/candyseven-50" class="tooltipped" target="_blank" data-tooltip="关注我的知乎" data-position="top" data-delay="50"><i class="fab fa-zhihu1">知</i></a><a href="/Lillia.github.io/atom.xml" class="tooltipped" target="_blank" data-tooltip="RSS 订阅" data-position="top" data-delay="50"><i class="fas fa-rss"></i></a></div></div></footer><div class="progress-bar"></div><div id="searchModal" class="modal"><div class="modal-content"><div class="search-header"><span class="title"><i class="fas fa-search"></i> &nbsp;&nbsp;搜索</span> <input type="search" id="searchInput" name="s" placeholder="请输入搜索的关键字" class="search-input"></div><div id="searchResult"></div></div></div><script>$(function(){!function(t,i,a){"use strict";$.ajax({url:t,dataType:"xml",success:function(t){var e=$("entry",t).map(function(){return{title:$("title",this).text(),content:$("content",this).text(),url:$("url",this).text()}}).get(),r=document.getElementById(i),n=document.getElementById(a);r.addEventListener("input",function(){var f='<ul class="search-result-list">',m=this.value.trim().toLowerCase().split(/[\s\-]+/);n.innerHTML="",this.value.trim().length<=0||(e.forEach(function(t){var r=!0,n=t.title.trim().toLowerCase(),i=t.content.trim().replace(/<[^>]+>/g,"").toLowerCase(),e=t.url;e=0===e.indexOf("/")?t.url:"/"+e;var a=-1,s=-1,l=-1;if(""!==n&&""!==i&&m.forEach(function(t,e){a=n.indexOf(t),s=i.indexOf(t),a<0&&s<0?r=!1:(s<0&&(s=0),0===e&&(l=s))}),r){f+="<li><a href='"+e+"' class='search-result-title'>"+n+"</a>";var c=t.content.trim().replace(/<[^>]+>/g,"");if(0<=l){var u=l-20,o=l+80;u<0&&(u=0),0===u&&(o=100),o>c.length&&(o=c.length);var h=c.substr(u,o);m.forEach(function(t){var e=new RegExp(t,"gi");h=h.replace(e,'<em class="search-keyword">'+t+"</em>")}),f+='<p class="search-result">'+h+"...</p>"}f+="</li>"}}),f+="</ul>",n.innerHTML=f)})}})}("/Lillia.github.io/search.xml","searchInput","searchResult")})</script><div class="stars-con"><div id="stars"></div><div id="stars2"></div><div id="stars3"></div></div><script>function switchNightMode(){$('<div class="Cuteen_DarkSky"><div class="Cuteen_DarkPlanet"></div></div>').appendTo($("body")),setTimeout(function(){$("body").hasClass("DarkMode")?($("body").removeClass("DarkMode"),localStorage.setItem("isDark","0"),$("#sum-moon-icon").removeClass("fa-sun").addClass("fa-moon")):($("body").addClass("DarkMode"),localStorage.setItem("isDark","1"),$("#sum-moon-icon").addClass("fa-sun").removeClass("fa-moon")),setTimeout(function(){$(".Cuteen_DarkSky").fadeOut(1e3,function(){$(this).remove()})},2e3)})}</script><div id="backTop" class="top-scroll"><a class="btn-floating btn-large waves-effect waves-light" href="#!"><i class="fas fa-arrow-up"></i></a></div><script src="/Lillia.github.io/libs/materialize/materialize.min.js"></script><script src="/Lillia.github.io/libs/masonry/masonry.pkgd.min.js"></script><script src="/Lillia.github.io/libs/aos/aos.js"></script><script src="/Lillia.github.io/libs/scrollprogress/scrollProgress.min.js"></script><script src="/Lillia.github.io/libs/lightGallery/js/lightgallery-all.min.js"></script><script src="/Lillia.github.io/js/matery.js"></script><script src="https://fastly.jsdelivr.net/gh/stevenjoezhang/live2d-widget@latest/autoload.js"></script><script src="https://ssl.captcha.qq.com/TCaptcha.js"></script><script src="/Lillia.github.io/libs/others/TencentCaptcha.js"></script><button id="TencentCaptcha" data-appid="xxxxxxxxxx" data-cbfn="callback" type="button" hidden></button><script>!function(){var t=document.createElement("script"),e=window.location.protocol.split(":")[0];t.src="https"===e?"https://zz.bdstatic.com/linksubmit/push.js":"http://push.zhanzhang.baidu.com/push.js";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(t,s)}()</script><script src="/Lillia.github.io/libs/others/clicklove.js" async></script><script async src="/Lillia.github.io/libs/others/busuanzi.pure.mini.js"></script><div style="position:fixed;bottom:125px;right:16px;cursor:pointer"><a title="兔小巢" target="_blank" rel="noopener" href="https://support.qq.com/products/491953"><i class="fa fa-comments fa-3x" aria-hidden="true"></i></a></div><script src="/Lillia.github.io/libs/instantpage/instantpage.js" type="module"></script></body></html>